# Contributor:
# Maintainer:
pkgname=mmdvm_firmware_builder
pkgver=
pkgrel=0
pkgdesc=""
url=""
arch="all"
license=""
depends=""
makedepends=""
install=""
subpackages="$pkgname-dev $pkgname-doc"
source=""
builddir="$srcdir/"

build() {
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--localstatedir=/var
	make
	#apk add newlib-arm-none-eabi binutils-arm-none-eabi gcc-arm-none-eabi
	#

	# on actual pi:
	#git clone https://github.com/juribeparada/MMDVM_HS.git
	#cd MMDVM_HS
	#git submodule init
	#git submodule update
	# (edit Config.h)
	# resize2fs /dev/mmcblk0p2 so we don't run out of space
	# apk add {newlib,binutils,gcc}-arm-none-eabi stm32flash
	# make hs
	# make mmdvm_hs_hat #flashes! zomg!
}

check() {
	make check
}

package() {
	make DESTDIR="$pkgdir" install
}

